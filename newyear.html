<!doctype html>
<html lang="ru">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    <meta name="color-scheme" content="dark" />
    <title>–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Å—é—Ä–ø—Ä–∏–∑</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;500;700;800&family=Playfair+Display:wght@600;700&display=swap"
        rel="stylesheet">

    <style>
        :root {
            /* –ë–∞–∑–∞ */
            --bg0: #060814;
            --bg1: #0a1232;
            --bg2: #071a1b;
            --text: rgba(255, 255, 255, .92);
            --muted: rgba(255, 255, 255, .72);

            /* –ê–∫—Ü–µ–Ω—Ç—ã (—Å–¥–µ—Ä–∂–∞–Ω–Ω—ã–π –ù–æ–≤—ã–π –≥–æ–¥) */
            --gold: #ffd08a;
            --ice: #7be7ff;
            --mint: #7bffbf;
            --pink: #ff6fb1;

            /* UI */
            --card: rgba(255, 255, 255, .08);
            --card2: rgba(255, 255, 255, .06);
            --line: rgba(255, 255, 255, .14);
            --line2: rgba(255, 255, 255, .20);
            --shadow: 0 24px 80px rgba(0, 0, 0, .52);
            --shadow2: 0 18px 55px rgba(0, 0, 0, .42);
            --r: 18px;

            --pad:
                max(18px, env(safe-area-inset-top)) max(16px, env(safe-area-inset-right)) max(18px, env(safe-area-inset-bottom)) max(16px, env(safe-area-inset-left));
            --maxw: 60rem;

            --focus: 0 0 0 3px rgba(123, 231, 255, .30), 0 0 0 1px rgba(255, 255, 255, .22);
        }

        * {
            box-sizing: border-box;
        }

        html,
        body {
            height: 100%;
        }

        body {
            margin: 0;
            color: var(--text);
            font-family: Manrope, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            overflow-x: hidden;

            /* –§–æ–Ω: ‚Äú–Ω–æ—á—å + —Å–µ–≤–µ—Ä–Ω–æ–µ —Å–∏—è–Ω–∏–µ‚Äù, –±–µ–∑ —Ü—ã–≥–∞–Ω—â–∏–Ω—ã */
            background:
                radial-gradient(1100px 700px at 18% 12%, rgba(255, 208, 138, .18), transparent 60%),
                radial-gradient(900px 650px at 82% 22%, rgba(123, 231, 255, .20), transparent 58%),
                radial-gradient(1000px 760px at 58% 110%, rgba(123, 255, 191, .12), transparent 58%),
                radial-gradient(780px 520px at 40% 45%, rgba(255, 111, 177, .10), transparent 60%),
                linear-gradient(180deg, var(--bg0), var(--bg1));
        }

        /* –°–∏—è–Ω–∏–µ/–∞—É—Ä–∞ (–º—è–≥–∫–∞—è –ø–ª—ë–Ω–∫–∞ –ø–æ–≤–µ—Ä—Ö —Ñ–æ–Ω–∞) */
        body::before {
            content: "";
            position: fixed;
            inset: -30vmax;
            pointer-events: none;
            background:
                conic-gradient(from 210deg at 50% 50%,
                    rgba(123, 231, 255, .10),
                    rgba(255, 208, 138, .08),
                    rgba(123, 255, 191, .08),
                    rgba(255, 111, 177, .06),
                    rgba(123, 231, 255, .10));
            filter: blur(45px) saturate(1.1);
            opacity: .65;
            transform: translateZ(0);
            animation: aurora 18s ease-in-out infinite alternate;
        }

        @keyframes aurora {
            0% {
                transform: translate3d(-1.5%, -1%, 0) rotate(-6deg);
            }

            100% {
                transform: translate3d(1.5%, 1%, 0) rotate(6deg);
            }
        }

        /* –°–Ω–µ–≥: 3 —Å–ª–æ—è (—á–∏—Å—Ç—ã–π CSS, —á—É—Ç—å ‚Äú–∂–∏–≤–µ–µ‚Äù) */
        .snow::before,
        .snow::after {
            content: "";
            position: fixed;
            inset: -12vh -12vw;
            pointer-events: none;
            background-image:
                radial-gradient(circle, rgba(255, 255, 255, .95) 1px, transparent 2px),
                radial-gradient(circle, rgba(255, 255, 255, .75) 1px, transparent 2px),
                radial-gradient(circle, rgba(255, 255, 255, .55) 1px, transparent 2px),
                radial-gradient(circle, rgba(123, 231, 255, .22) 1px, transparent 3px);
            background-size: 120px 120px, 190px 190px, 280px 280px, 420px 420px;
            background-position: 0 0, 40px 60px, 90px 30px, 120px 220px;
            opacity: .42;
            filter: blur(.2px);
            transform: translateZ(0);
            animation: snowFall 16s linear infinite;
        }

        .snow::after {
            opacity: .24;
            filter: blur(.8px);
            animation-duration: 26s;
        }

        @keyframes snowFall {
            from {
                transform: translate3d(0, -10vh, 0);
            }

            to {
                transform: translate3d(0, 12vh, 0);
            }
        }

        .wrap {
            min-height: 100%;
            padding: var(--pad);
            display: grid;
            place-items: center;
        }

        .app {
            width: min(var(--maxw), 100%);
            display: grid;
            gap: 14px;
        }

        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .topbar {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 14px;
        }

        .brand {
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .logo {
            width: 44px;
            height: 44px;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, .16);
            background:
                radial-gradient(12px 12px at 30% 28%, rgba(255, 255, 255, .28), transparent 60%),
                linear-gradient(135deg, rgba(255, 208, 138, .26), rgba(123, 231, 255, .18));
            box-shadow: var(--shadow2);
            backdrop-filter: blur(10px);
            display: grid;
            place-items: center;
            position: relative;
            overflow: hidden;
        }

        .logo::after {
            content: "";
            position: absolute;
            inset: -40%;
            background: linear-gradient(90deg, transparent 0 45%, rgba(255, 255, 255, .16) 45% 55%, transparent 55% 100%);
            transform: rotate(22deg);
            opacity: .35;
        }

        .logo svg {
            width: 22px;
            height: 22px;
            opacity: .95;
        }

        .title {
            display: flex;
            flex-direction: column;
            gap: 6px;
            min-width: 0;
        }

        h1 {
            margin: 0;
            font-family: "Playfair Display", ui-serif, Georgia, serif;
            font-size: clamp(24px, 3.2vw, 38px);
            letter-spacing: .01em;
            line-height: 1.08;
        }

        .sub {
            color: var(--muted);
            font-size: 14px;
            line-height: 1.55;
            max-width: 58ch;
        }

        .status {
            display: grid;
            gap: 8px;
            align-items: end;
            justify-items: end;
            min-width: 180px;
        }

        .chip {
            border: 1px solid var(--line);
            background: rgba(255, 255, 255, .06);
            border-radius: 999px;
            padding: 10px 12px;
            font-size: 13px;
            color: rgba(255, 255, 255, .78);
            white-space: nowrap;
            backdrop-filter: blur(12px);
            box-shadow: 0 10px 35px rgba(0, 0, 0, .28);
        }

        .bar {
            width: 100%;
            height: 10px;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, .14);
            background: rgba(255, 255, 255, .05);
            overflow: hidden;
        }

        .bar>i {
            display: block;
            height: 100%;
            width: 0%;
            border-radius: 999px;
            background: linear-gradient(90deg, rgba(123, 231, 255, .85), rgba(255, 208, 138, .85));
            box-shadow: 0 0 20px rgba(123, 231, 255, .22);
            transition: width .25s ease;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        .card {
            border: 1px solid var(--line);
            background: linear-gradient(180deg, rgba(255, 255, 255, .08), rgba(255, 255, 255, .06));
            border-radius: calc(var(--r) + 2px);
            box-shadow: var(--shadow);
            backdrop-filter: blur(14px);
            overflow: hidden;
            position: relative;
        }

        /* –ú—è–≥–∫–∏–π ‚Äú–±–ª–∏–∫‚Äù —Å–≤–µ—Ä—Ö—É –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .card::before {
            content: "";
            position: absolute;
            inset: -40% -20% auto -20%;
            height: 220px;
            background: radial-gradient(closest-side, rgba(255, 255, 255, .14), transparent 70%);
            pointer-events: none;
        }

        .hero {
            padding: 18px 18px 10px;
            display: grid;
            gap: 10px;
        }

        .heroLine {
            display: flex;
            gap: 10px;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .hint {
            display: flex;
            gap: 10px;
            align-items: center;
            color: var(--muted);
            font-size: 13px;
            line-height: 1.5;
        }

        .badge {
            display: inline-flex;
            gap: 8px;
            align-items: center;
            padding: 8px 10px;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, .14);
            background: rgba(10, 18, 50, .45);
            backdrop-filter: blur(10px);
            color: rgba(255, 255, 255, .82);
            font-size: 12px;
            white-space: nowrap;
        }

        .badgeDot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: rgba(255, 208, 138, .95);
            box-shadow: 0 0 16px rgba(255, 208, 138, .28);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            justify-content: space-between;
            padding: 10px 18px 18px;
            border-top: 1px solid rgba(255, 255, 255, .08);
        }

        .btnRow {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: flex-end;
        }

        .btn {
            appearance: none;
            border: 1px solid rgba(255, 255, 255, .16);
            background: rgba(255, 255, 255, .08);
            color: var(--text);
            border-radius: 14px;
            padding: 12px 14px;
            cursor: pointer;
            font: inherit;
            font-weight: 700;
            letter-spacing: .01em;
            transition: transform .08s ease, background .15s ease, border-color .15s ease, filter .15s ease;
            user-select: none;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            background: rgba(255, 255, 255, .12);
            border-color: rgba(255, 255, 255, .26);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn:focus-visible {
            outline: none;
            box-shadow: var(--focus);
        }

        .btn.primary {
            border-color: rgba(123, 231, 255, .26);
            background: linear-gradient(135deg, rgba(123, 231, 255, .16), rgba(255, 208, 138, .12));
        }

        .btn.secondary {
            background: transparent;
            color: rgba(255, 255, 255, .74);
        }

        .btn.ghost {
            background: rgba(255, 255, 255, .05);
            color: rgba(255, 255, 255, .82);
        }

        /* –°–µ—Ç–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤ */
        .grid {
            padding: 18px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        @media (max-width: 720px) {
            .grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .status {
                min-width: 140px;
            }
        }

        @media (max-width: 520px) {
            .grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .status {
                display: none;
            }
        }

        .gift {
            position: relative;
            border: 1px solid rgba(255, 255, 255, .14);
            background: rgba(255, 255, 255, .06);
            border-radius: 16px;
            padding: 14px;
            min-height: 86px;
            display: grid;
            gap: 8px;
            align-content: center;
            cursor: pointer;
            overflow: hidden;
            transition: transform .12s ease, background .18s ease, border-color .18s ease, box-shadow .18s ease;
            text-align: left;
            box-shadow: 0 10px 28px rgba(0, 0, 0, .18);
            transform: translateZ(0);
        }

        /* ‚Äú–ª–µ–Ω—Ç–∞‚Äù */
        .gift::before {
            content: "";
            position: absolute;
            inset: -40% -40%;
            background:
                linear-gradient(90deg,
                    transparent 0 44%,
                    rgba(255, 255, 255, .14) 44% 56%,
                    transparent 56% 100%);
            transform: rotate(18deg);
            opacity: .28;
            pointer-events: none;
        }

        /* ‚Äú—Å–Ω–µ–∂–Ω–∞—è –∏—Å–∫—Ä–∞‚Äù */
        .gift::after {
            content: "";
            position: absolute;
            inset: auto -40% -40% auto;
            width: 180px;
            height: 180px;
            background: radial-gradient(closest-side, rgba(123, 231, 255, .16), transparent 70%);
            transform: rotate(-12deg);
            opacity: .65;
            pointer-events: none;
        }

        .gift:hover {
            background: rgba(255, 255, 255, .09);
            border-color: rgba(255, 255, 255, .24);
            transform: translateY(-2px);
            box-shadow: 0 16px 38px rgba(0, 0, 0, .25);
        }

        .gift:active {
            transform: translateY(-1px);
        }

        .gift:focus-visible {
            outline: none;
            box-shadow: var(--focus);
            border-color: rgba(123, 231, 255, .35);
        }

        .giftTop {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }

        .gift .n {
            font-weight: 800;
            letter-spacing: .06em;
            font-size: 11px;
            color: rgba(255, 255, 255, .70);
            text-transform: uppercase;
        }

        .tag {
            font-size: 11px;
            padding: 6px 8px;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, .14);
            background: rgba(10, 18, 50, .42);
            color: rgba(255, 255, 255, .72);
            white-space: nowrap;
        }

        .gift .t {
            font-size: 14px;
            line-height: 1.35;
            color: rgba(255, 255, 255, .92);
        }

        .gift.opened {
            background: linear-gradient(135deg, rgba(123, 255, 191, .13), rgba(255, 208, 138, .10));
            border-color: rgba(123, 255, 191, .28);
        }

        .gift.opened .tag {
            border-color: rgba(123, 255, 191, .26);
            color: rgba(255, 255, 255, .82);
        }

        .footer {
            padding: 0 18px 18px;
            color: rgba(255, 255, 255, .68);
            font-size: 13px;
            line-height: 1.6;
        }

        /* –ú–æ–¥–∞–ª–∫–∞ */
        .modal {
            position: fixed;
            inset: 0;
            display: none;
            place-items: center;
            padding: var(--pad);
            background: rgba(0, 0, 0, .58);
            backdrop-filter: blur(8px);
            z-index: 10;
        }

        .modal.show {
            display: grid;
            animation: fadeIn .14s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .modalBox {
            width: min(38rem, 100%);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, .18);
            background:
                radial-gradient(700px 300px at 20% 0%, rgba(255, 208, 138, .10), transparent 60%),
                radial-gradient(700px 300px at 85% 10%, rgba(123, 231, 255, .10), transparent 60%),
                rgba(12, 16, 30, .92);
            box-shadow: var(--shadow);
            overflow: hidden;
            transform: translateY(6px) scale(.99);
            animation: pop .18s ease-out forwards;
        }

        @keyframes pop {
            to {
                transform: translateY(0) scale(1);
            }
        }

        .modalHead {
            padding: 14px 16px;
            display: flex;
            justify-content: space-between;
            gap: 10px;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, .10);
        }

        .modalHead strong {
            font-size: 13px;
            letter-spacing: .08em;
            text-transform: uppercase;
            color: rgba(255, 255, 255, .76);
        }

        .close {
            border: 1px solid rgba(255, 255, 255, .16);
            background: rgba(255, 255, 255, .06);
            color: var(--text);
            border-radius: 12px;
            padding: 10px 12px;
            cursor: pointer;
            font: inherit;
            font-weight: 800;
            letter-spacing: .01em;
        }

        .close:hover {
            background: rgba(255, 255, 255, .10);
            border-color: rgba(255, 255, 255, .24);
        }

        .close:focus-visible {
            outline: none;
            box-shadow: var(--focus);
        }

        .modalBody {
            padding: 16px;
            display: grid;
            gap: 10px;
        }

        .big {
            font-size: 20px;
            line-height: 1.4;
            margin: 0;
            font-weight: 800;
            letter-spacing: .01em;
        }

        .small {
            margin: 0;
            color: rgba(255, 255, 255, .74);
            line-height: 1.7;
            font-size: 14px;
        }

        .modalActions {
            padding: 0 16px 16px;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        /* –£–≤–∞–∂–µ–Ω–∏–µ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
        @media (prefers-reduced-motion: reduce) {
            body::before {
                animation: none;
            }

            .snow::before,
            .snow::after {
                animation: none;
            }

            .gift,
            .btn,
            .modalBox {
                transition: none;
                animation: none;
            }
        }
    </style>
</head>

<body class="snow">
    <div class="wrap">
        <main class="app">
            <header class="topbar">
                <div class="brand">
                    <div class="logo" aria-hidden="true">
                        <!-- –ú–∏–Ω–∏-SVG, —á—Ç–æ–±—ã –Ω–µ —Ç—è–Ω—É—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏ -->
                        <svg viewBox="0 0 24 24" fill="none">
                            <path
                                d="M12 2c2.4 1.3 3.8 3.1 3.8 5.2 0 3-2.7 5-3.8 5-1.1 0-3.8-2-3.8-5C8.2 5.1 9.6 3.3 12 2Z"
                                stroke="rgba(255,255,255,.92)" stroke-width="1.6" />
                            <path d="M6 12.5c2.2 2.3 4.4 3.6 6 3.6s3.8-1.3 6-3.6" stroke="rgba(255,255,255,.78)"
                                stroke-width="1.6" stroke-linecap="round" />
                            <path d="M7.5 20.5h9" stroke="rgba(255,255,255,.70)" stroke-width="1.6"
                                stroke-linecap="round" />
                        </svg>
                    </div>

                    <div class="title">
                        <h1>–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Å—é—Ä–ø—Ä–∏–∑</h1>
                        <div class="sub">
                            –û—Ç–∫—Ä—ã–≤–∞–π –ø–æ–¥–∞—Ä–æ—á–∫–∏. –í –∫–∞–∂–¥–æ–º ‚Äî –º–∞–ª–µ–Ω—å–∫–∞—è –ø—Ä–∞–≤–¥–∞ –ø—Ä–æ –Ω–µ—ë –∏ –ø—Ä–æ –≤–∞—Å.
                            –î–∏–∑–∞–π–Ω ‚Äî –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π, –Ω–æ –±–µ–∑ –ø–µ—Ä–µ–≥–∏–±–∞.
                        </div>
                    </div>
                </div>

                <div class="status">
                    <div class="chip" id="progress">0/12 –æ—Ç–∫—Ä—ã—Ç–æ</div>
                    <div class="bar" aria-hidden="true"><i id="barFill"></i></div>
                </div>
            </header>

            <section class="card" aria-label="–ü–æ–¥–∞—Ä–∫–∏">
                <div class="hero">
                    <div class="heroLine">
                        <div class="hint">
                            <span class="badge"><span class="badgeDot"></span> –û—Ç–∫—Ä—ã–≤–∞–π –ø–æ–¥–∞—Ä–æ—á–∫–∏! –í—Å—Ç—Ä–µ—á–∞–π –∏—Ç–æ–≥–∏ –≥–æ–¥–∞?</span>
                            <span class="badge">–û—Ç–∫—Ä—ã–≤–∞–π —á—Ç–æ —Ö–æ—á–µ—à—å –∏ –∫–æ–≥–¥–∞ —Ö–æ—á–µ—à—å, –º–∏–ª–∞—è</span>
                        </div>
                    </div>
                </div>

                <div class="controls">
                    <button class="btn secondary" id="backToIntro" type="button">‚Üê –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∞—Ä—Ö–∏–≤—É</button>

                    <div class="btnRow">
                        <button class="btn ghost" id="resetProgress" type="button" title="–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å">‚Ü∫
                            —Å–±—Ä–æ—Å</button>
                        <button class="btn primary" id="randomGift" type="button">‚ú® –æ—Ç–∫—Ä—ã—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π</button>
                        <button class="btn" id="openAll" type="button">‚ö° –æ—Ç–∫—Ä—ã—Ç—å –≤—Å—ë</button>
                    </div>
                </div>

                <div class="grid" id="grid" role="list"></div>

                <div class="footer">
                    P.S. –Ø –ø—ã—Ç–∞–ª—Å—è —Å–¥–µ–ª–∞—Ç—å –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –Ω–æ–≤–æ–≥–æ –≥–æ–¥–∞, –Ω–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å –∫–∞–∫ —Ç–æ —Å—Ç—Ä–∞–Ω–Ω–æ, –Ω–æ –ø–ª–µ–≤–∞—Ç—å!!‚Äù.
                </div>
            </section>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ -->
    <div class="modal" id="modal" aria-hidden="true">
        <div class="modalBox" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
            <div class="modalHead">
                <strong id="modalTitle">–ü–æ–¥–∞—Ä–æ–∫</strong>
                <button class="close" id="closeModal" type="button">–∑–∞–∫—Ä—ã—Ç—å</button>
            </div>

            <div class="modalBody">
                <p class="big" id="modalBig"></p>
                <p class="small" id="modalSmall"></p>
            </div>

            <div class="modalActions">
                <button class="btn secondary" id="nextGift" type="button">—Å–ª–µ–¥—É—é—â–∏–π ‚Üí</button>
            </div>
        </div>
    </div>

    <script>
        // === –ö–û–ù–¢–ï–ù–¢ ===
    const gifts = [
        {
            big: "–õ—É—á—à–∞—è –∫–æ—à–∫–∞ –≥–æ–¥–∞ üêæ",
            small: "–¢—ã —Ç–∞–∫–∞—è –º–∏–ª–∞—è –∏ —É–ø—Ä—è–º–∞—Å—è –∫–∞–∫ –∫–æ—à–µ—á–∫–∞, –≤ —Ö–æ—Ä–æ—à–µ–º —Å–º—ã—Å–ª–µ. –î–∞–∂–µ –∫–æ–≥–¥–∞ —É—Å—Ç–∞–µ—à—å, –æ—Å—Ç–∞–µ—à—å—Å—è —Å–æ–±–æ–π. –û—á–µ–Ω—å —ç—Ç–æ –≤ —Ç–µ–±–µ —Ü–µ–Ω—é."
        },
        {
            big: "–¢—ã –∫–∞–∫ —Ç—ë–ø–ª—ã–π —á–∞–π ‚òï",
            small: "–° —Ç–æ–±–æ–π –≤—Å–µ–≥–¥–∞ —Å–ø–æ–∫–æ–π–Ω–æ. –õ–∏—à—å —Ç—ã —É—Å–ø–æ–∫–æ–∏—à—å –º–µ–Ω—è, –≤ —Å–∞–º—ã–π —Å–ª–æ–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç."
        },
        {
            big: "–°–∏–ª—å–Ω–∞—è, –Ω–æ –Ω–µ —á–µ—Ä—Å—Ç–≤–∞—è üí™",
            small: "–ó–∞ —ç—Ç–æ—Ç –≥–æ–¥, —Ç—ã —Å–ø—Ä–∞–≤–∏–ª–∞—Å—å —Å —Ç–æ–ª—å–∫–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏, —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏ –∏ —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è –ø–æ —Å–µ–π –¥–µ–Ω—å. –Ø –≥–æ—Ä–∂—É—Å—å —Ç–æ–±–æ–π, –ª—É—á–∏–∫!"
        },
        {
            big: "–¢–≤–æ—è –∫—Ä–∞—Å–æ—Ç–∞ –≥–ª—É–±–∂–µ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏ ‚ú®",
            small: "–£ —Ç–µ–±—è –æ—Å–æ–±–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å, –∫–æ—Ç–æ—Ä—ã–π —è –Ω–µ –≤–∏–¥–µ–ª –Ω–∏–∫–æ–≥–¥–∞ –ø—Ä–µ–∂–¥–µ –Ω–∏ –≤ –∫–æ–º –¥—Ä—É–≥–æ–º. –ò—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–∞—è –∏ –Ω–µ –∑–∞–±—ã–≤–∞–µ–º–∞—è, –≤—Å–µ —ç—Ç–æ –ª–∏—à—å –ø—Ä–æ —Ç–µ–±—è"
        },
        {
            big: "–ú–Ω–µ –ø—Ä–∞–≤–¥–∞ –ø–æ–≤–µ–∑–ª–æ —Å —Ç–æ–±–æ–π üçÄ",
            small: "–ó–≤—É—á–∏—Ç –ø—Ä–æ—Å—Ç–æ, –Ω–æ —è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–¥, —á—Ç–æ —Ç—ã –º–æ–π –ø–∞—Ä—Ç–Ω–µ—Ä, —á—Ç–æ —Ç—ã –º–æ—è —Ä–∞–¥–æ—Å—Ç—å –≤ —ç—Ç–æ–π –∂–∏–∑–Ω–∏."
        },
        {
            big: "–°–ø–∞—Å–∏–±–æ –∑–∞ —Ç–≤–æ—é –ø—Ä—è–º–æ—Ç—É ü§ç",
            small: "–î–∞–∂–µ –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞—à–Ω–æ —Å–∫–∞–∑–∞—Ç—å –ø—Ä–∞–≤–¥—É, —Ç—ã –≥–æ–≤–æ—Ä–∏—à—å. –≠—Ç–æ –Ω–µ –≥—Ä—É–±–æ—Å—Ç—å, –∞ –∑—Ä–µ–ª–æ—Å—Ç—å."
        },
        {
            big: "–° —Ç–æ–±–æ–π –≤–µ–∑–¥–µ –∫–∞–∫ –¥–æ–º–∞ üïØÔ∏è",
            small: "–° —Ç–æ–±–æ–π, —Ö–æ—Ç—å –≤ –≥–æ—Ä—ã –∏ –∞–¥, –Ω–æ –≤–µ–∑–¥–µ –≥–¥–µ –±—É–¥–µ—à—å —Ç—ã, —è –±—É–¥—É –æ—â—É—â–∞—Ç—å —Å–µ–±—è –∫–∞–∫ –≤ —Å–∞–º–æ–º —É—é—Ç–Ω–æ–º –º–µ—Å—Ç–µ."
        },
        {
            big: "–¢—ã –º–µ–Ω—è –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å üé®",
            small: "–ü–æ—Å–ª–µ –æ–±—â–µ–Ω–∏—è —Å —Ç–æ–±–æ–π —Ö–æ—á–µ—Ç—Å—è —Å—Ç–∞—Ç—å –ª—É—á—à–µ: –∂–∏—Ç—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ, –∑–∞–±–æ—Ç–∏—Ç—å—Å—è, —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —Ä–∞—Å—Ç–∏ –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ."
        },
        {
            big: "–ù–∞—à–∏ –º–æ–º–µ–Ω—Ç—ã –±–µ—Å—Ü–µ–Ω–Ω—ã üì∏",
            small: "–°–º–µ—à–Ω—ã–µ, —Å—Ç—Ä–∞–Ω–Ω—ã–µ, –º–∏–ª—ã–µ, –∏–Ω–æ–≥–¥–∞ –ø–æ–ª–Ω—ã–π –±–∞—Ä–¥–∞–∫, –Ω–æ –Ω–∞—à. –Ø –±—ã –Ω–µ –ø—Ä–æ–º–µ–Ω—è–ª —ç—Ç–æ –Ω–∏ –Ω–∞ —á—Ç–æ."
        },
        {
            big: "–¢—ã —É–º–µ–µ—à—å –º–µ–Ω—è —Ä–∞—Å—Å–º–µ—à–∏—Ç—å üôÇ",
            small: "–¢–≤–æ–π —é–º–æ—Ä –ø—Ä–µ–∫—Ä–∞—Å–µ–Ω, –∏ –∫–∞–∫ –º–Ω–µ –ø—Ä–∏—è—Ç–Ω–æ, –∫–æ–≥–¥–∞ –æ–Ω —É –Ω–∞—Å —Å—Ö–æ–¥–∏—Ç—Å—è, —Å —Ç–æ–±–æ–π —è –æ—â—É—â–∞—é —Å–µ–±—è —Ç–∞–∫ —Å–≤–æ–±–æ–¥–Ω–æ –≤ —é–º–æ—Ä–µ."
        },
        {
            big: "–Ø —Ç–µ–±—è –ª—é–±–ª—é ‚ù§Ô∏è",
            small: "–ë–µ–∑ –≤—Å—è–∫–∏—Ö —É—Å–ª–æ–≤–∏–π. –¢—ã –º–æ—è –ª—é–±–æ–≤—å, –Ω–∞–≤—Å–µ–≥–¥–∞ –∏ –≤—Å–µ–≥–¥–∞.."
        },
        {
            big: "–ú–æ–π –ø—Ä–∞–∑–¥–Ω–∏–∫ ‚Äî —ç—Ç–æ —Ç—ã üéÑ",
            small: "–° —Ç–æ–±–æ–π –ø–æ—è–≤–ª—è–µ—Ç—Å—è —á—É–≤—Å—Ç–≤–æ, —á—Ç–æ –≤–ø–µ—Ä–µ–¥–∏ –±—É–¥–µ—Ç –µ—â—ë –ª—É—á—à–µ. –ò —è —Ö–æ—á—É –±—ã—Ç—å —Å —Ç–æ–±–æ–π –¥–∞–ª—å—à–µ."
        },
    ];


        // === STATE (—Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å) ===
        const LS_KEY = "ny_gifts_opened_v2";

        function loadOpened() {
            try {
                const raw = localStorage.getItem(LS_KEY);
                const arr = raw ? JSON.parse(raw) : [];
                return new Set(Array.isArray(arr) ? arr : []);
            } catch {
                return new Set();
            }
        }

        function saveOpened() {
            try {
                localStorage.setItem(LS_KEY, JSON.stringify([...opened]));
            } catch { }
        }

        let opened = loadOpened();

        // === UI ===
        const grid = document.getElementById('grid');
        const progress = document.getElementById('progress');
        const barFill = document.getElementById('barFill');

        const modal = document.getElementById('modal');
        const closeModal = document.getElementById('closeModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBig = document.getElementById('modalBig');
        const modalSmall = document.getElementById('modalSmall');
        const nextGiftBtn = document.getElementById('nextGift');

        const openAllBtn = document.getElementById('openAll');
        const randomGiftBtn = document.getElementById('randomGift');
        const backToIntroBtn = document.getElementById('backToIntro');
        const resetBtn = document.getElementById('resetProgress');

        let lastOpenedIndex = null;

        function updateProgressUI() {
            const total = gifts.length;
            const done = opened.size;

            progress.textContent = `${done}/${total} –æ—Ç–∫—Ä—ã—Ç–æ`;
            const pct = total ? Math.round((done / total) * 100) : 0;
            barFill.style.width = `${pct}%`;
        }

        function renderGrid() {
            grid.innerHTML = "";

            gifts.forEach((g, i) => {
                const btn = document.createElement('button');
                btn.type = "button";
                btn.className = "gift" + (opened.has(i) ? " opened" : "");
                btn.setAttribute("role", "listitem");
                btn.setAttribute("aria-label", `–ü–æ–¥–∞—Ä–æ–∫ ${i + 1}. ${opened.has(i) ? "–û—Ç–∫—Ä—ã—Ç" : "–ó–∞–∫—Ä—ã—Ç"}`);

                const stateText = opened.has(i) ? "–æ—Ç–∫—Ä—ã—Ç" : "–Ω–∞–∂–º–∏, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å";
                const tagText = opened.has(i) ? "–æ—Ç–∫—Ä—ã—Ç" : "–∑–∞–∫—Ä—ã—Ç";

                btn.innerHTML = `
          <div class="giftTop">
            <div class="n">–ø–æ–¥–∞—Ä–æ–∫ #${String(i + 1).padStart(2, '0')}</div>
            <div class="tag">${tagText}</div>
          </div>
          <div class="t">${stateText}</div>
        `;

                btn.addEventListener('click', () => openGift(i));
                grid.appendChild(btn);
            });

            updateProgressUI();
        }

        function openGift(i) {
            opened.add(i);
            saveOpened();
            renderGrid();

            lastOpenedIndex = i;
            const g = gifts[i];

            modalTitle.textContent = `–ü–æ–¥–∞—Ä–æ–∫ #${String(i + 1).padStart(2, '0')}`;
            modalBig.textContent = g.big;
            modalSmall.textContent = g.small;

            modal.classList.add('show');
            modal.setAttribute('aria-hidden', 'false');

            // –£–¥–æ–±—Å—Ç–≤–æ: —Ñ–æ–∫—É—Å –Ω–∞ –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è
            closeModal.focus({ preventScroll: true });
        }

        function close() {
            modal.classList.remove('show');
            modal.setAttribute('aria-hidden', 'true');
        }

        function openNext() {
            if (lastOpenedIndex === null) return;
            const next = (lastOpenedIndex + 1) % gifts.length;
            openGift(next);
        }

        closeModal.addEventListener('click', close);
        modal.addEventListener('click', (e) => { if (e.target === modal) close(); });
        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') close();
            if (modal.classList.contains('show') && e.key === 'Enter' && (document.activeElement === nextGiftBtn)) openNext();
        });

        nextGiftBtn.addEventListener('click', openNext);

        openAllBtn.addEventListener('click', () => {
            gifts.forEach((_, i) => opened.add(i));
            saveOpened();
            renderGrid();
        });

        randomGiftBtn.addEventListener('click', () => {
            const closed = [];
            for (let i = 0; i < gifts.length; i++) if (!opened.has(i)) closed.push(i);

            const pool = closed.length ? closed : [...Array(gifts.length).keys()];
            const pick = pool[Math.floor(Math.random() * pool.length)];
            openGift(pick);
        });

        resetBtn.addEventListener('click', () => {
            opened = new Set();
            saveOpened();
            renderGrid();
            close();
        });

        backToIntroBtn.addEventListener('click', () => {
            window.location.href = "./index.html";
        });

        renderGrid();
    </script>
</body>

</html>